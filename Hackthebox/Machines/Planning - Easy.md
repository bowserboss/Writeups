Started with a nmap scan
```
22 OpenSSH 9.6p1 (ubuntu)
80 nginx 1.24.0
```
The room also gives us creds to some login `admin:0D5oT70Fq13EvB5r` and the nmap scan shows there is a redirect to a domain for the site `http://planning.htb` the site looks like a pretty static site the `contact.php` just sends a GET request the `enroll.php` does send a POST request and says we registered a user did a subdomain scan and found one `grafana.planning.htb` and this is were we can use the login we got and its running version `11.0.0` doing a google search for any exploit for this version and I found a SQL injection RCE/File read `CVE-2024-9264` and running this exploit we can read the `/etc/passwd` `python3 exploit.py -u admin -p 0D5oT70Fq13EvB5r -f /etc/passwd http://grafana.planning.htb` there is also no users we can see everything but `root` has login disabled when we also use this exploit to get a reverse shell `python3 exploit.py -u admin -p 0D5oT70Fq13EvB5r -c "reverse shell" http://grafana.planning.htb` and we get a call back as the `root` user but we can run linpeas keep getting permission denied found if we just use bash we can run sh scripts with out the need for chmod looking in the environment variables there is a Grafana variables with a username and password `enzo:RioTecRANDEntANT!` and we can use this login to ssh into the main machine using metasploit I ran the `local exploit suggester` and it says its vulnerable to the `su` exploit but did not work there is a `crontab.db` file that has a password for a backup `P4ssw0rdS0pRi0T3c` and in the linpeas scan there is a webserver running on port `8000` so we have to post forward to are host `ssh enzo@planning.htb -L 8000:localhost:8000` and trying all the logins we found for this service the user account is `root` with the backup password and after we logged in its a crontab UI we can make a crontab with a reverse shell and then run it we get a call back as root 
 

